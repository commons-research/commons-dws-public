<h1 id="documentation"><a aria-hidden="true" class="anchor-heading icon-link" href="#documentation"></a>Documentation</h1>
<p>Documentation is an important step for all kind of projects.
Specially then, when you want to share it and used by the community.
Mostly the mayority of time is spend for coding and some small part for the documentation.
To make the documentation easier and less timeconsuming, some packages are developped.</p>
<h2 id="mkdocs"><a aria-hidden="true" class="anchor-heading icon-link" href="#mkdocs"></a>Mkdocs</h2>
<p><a href="https://www.mkdocs.org">Mkdocs</a> is a tool for documentation.
It can build out of a markdown (*.md) file a website.
Github provides the possibility to add "Actions" (actions that would be run after a specific event) and also host this website.</p>
<h3 id="installation"><a aria-hidden="true" class="anchor-heading icon-link" href="#installation"></a>Installation</h3>
<p>We recommend to use Poetry for this task. Remember: the best practice would be using one environment for one project.</p>
<pre class="language-bash"><code class="language-bash"><span class="token comment"># basic installation</span>
poetry <span class="token function">add</span> mkdocs

<span class="token comment"># for more material &#x3C;https://squidfunk.github.io/mkdocs-material/></span>
poetry <span class="token function">add</span> mkdocs-material
</code></pre>
<p>Alternativaly it can also be done with Pypi:</p>
<pre class="language-bash"><code class="language-bash"><span class="token comment"># basic installation</span>
pip <span class="token function">install</span> mkdocs

<span class="token comment"># for more material &#x3C;https://squidfunk.github.io/mkdocs-material/></span>
pip <span class="token function">install</span> mkdocs-material
</code></pre>
<h3 id="project-layout"><a aria-hidden="true" class="anchor-heading icon-link" href="#project-layout"></a>Project layout</h3>
<p>If you run the first time <code>mkdocs new &#x3C;project_name></code>, it will create new folders for the documentation and a config file (mkdocs.yml). </p>
<pre><code>mkdocs.yml    # The configuration file.
docs/
    index.md  # The documentation homepage.
    ...       # Other markdown pages, images and other files.  
</code></pre>
<h3 id="configuration"><a aria-hidden="true" class="anchor-heading icon-link" href="#configuration"></a>Configuration</h3>
<p>Open the configuration file (mkdocs.yml) and customize it. This file has some basic functions, which can be very usefull.
This file was used in this project <a href="https://commons-research.github.io/dataset-extractor-lotus/">https://commons-research.github.io/dataset-extractor-lotus/</a>.</p>
<pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">site_name</span><span class="token punctuation">:</span> Dataset Extractor for LOTUS  <span class="token comment">#websitename (name of project) </span>
<span class="token key atrule">site_description</span><span class="token punctuation">:</span> <span class="token string">"Python script to extract data from the LOTUS Database"</span> <span class="token comment">#description</span>
<span class="token key atrule">site_url</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//commons<span class="token punctuation">-</span>research.github.io/dataset<span class="token punctuation">-</span>extractor<span class="token punctuation">-</span>lotus/ <span class="token comment">#website to mkdocs (will be deployd after running 'mkdocs gh-deploy')</span>
<span class="token key atrule">site_author</span><span class="token punctuation">:</span> &#x3C;your<span class="token punctuation">-</span>name<span class="token punctuation">></span> <span class="token comment">#your name</span>
<span class="token key atrule">repo_url</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//github.com/commons<span class="token punctuation">-</span>research/dataset<span class="token punctuation">-</span>extractor<span class="token punctuation">-</span>lotus <span class="token comment">#Github repository</span>
<span class="token key atrule">repo_name</span><span class="token punctuation">:</span> GitHub <span class="token punctuation">-</span> Dataset Extractor for LOTUS <span class="token comment">#name of repository</span>

<span class="token key atrule">nav</span><span class="token punctuation">:</span> <span class="token comment">#links to the documentation files in the "/docs" folder.</span>
  <span class="token punctuation">-</span> <span class="token key atrule">Home</span><span class="token punctuation">:</span> index.md
  <span class="token punctuation">-</span> <span class="token key atrule">About</span><span class="token punctuation">:</span> about.md
<span class="token key atrule">not_in_nav</span><span class="token punctuation">:</span> <span class="token comment">#files, which shouldn't be published with mkdocs, but still in the repo.</span>
<span class="token key atrule">theme</span><span class="token punctuation">:</span> readthedocs <span class="token comment">#theme</span>
<span class="token key atrule">language</span><span class="token punctuation">:</span> en

<span class="token key atrule">theme</span><span class="token punctuation">:</span> <span class="token comment">#advanced changes</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> material
  <span class="token key atrule">features</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> navigation.tabs
    <span class="token punctuation">-</span> navigation.sections
    <span class="token punctuation">-</span> toc.integrate
    <span class="token punctuation">-</span> navigation.top
    <span class="token punctuation">-</span> search.suggest
    <span class="token punctuation">-</span> search.highlight
    <span class="token punctuation">-</span> content.tabs.link
    <span class="token punctuation">-</span> content.code.annotation
    <span class="token punctuation">-</span> content.code.copy
  <span class="token key atrule">language</span><span class="token punctuation">:</span> en
  <span class="token key atrule">palette</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">scheme</span><span class="token punctuation">:</span> default
      <span class="token key atrule">toggle</span><span class="token punctuation">:</span>
        <span class="token key atrule">icon</span><span class="token punctuation">:</span> material/toggle<span class="token punctuation">-</span>switch<span class="token punctuation">-</span>off<span class="token punctuation">-</span>outline 
        <span class="token key atrule">name</span><span class="token punctuation">:</span> Switch to dark mode
      <span class="token key atrule">primary</span><span class="token punctuation">:</span> teal
      <span class="token key atrule">accent</span><span class="token punctuation">:</span> purple 
    <span class="token punctuation">-</span> <span class="token key atrule">scheme</span><span class="token punctuation">:</span> slate 
      <span class="token key atrule">toggle</span><span class="token punctuation">:</span>
        <span class="token key atrule">icon</span><span class="token punctuation">:</span> material/toggle<span class="token punctuation">-</span>switch
        <span class="token key atrule">name</span><span class="token punctuation">:</span> Switch to light mode    
      <span class="token key atrule">primary</span><span class="token punctuation">:</span> teal
      <span class="token key atrule">accent</span><span class="token punctuation">:</span> lime


<span class="token key atrule">copyright</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">
  &#x26;copy; 2024 &#x3C;a href="https://github.com/pamrein"  target="_blank" rel="noopener"> YOUR-NAME &#x3C;/a></span>
</code></pre>
<h3 id="commands"><a aria-hidden="true" class="anchor-heading icon-link" href="#commands"></a>Commands</h3>
<ul>
<li><code>mkdocs new [dir-name]</code> - Create a new project.</li>
<li><code>mkdocs serve</code> - Start the live-reloading docs server.</li>
<li><code>mkdocs build</code> - Build the documentation site.</li>
<li><code>mkdocs -h</code> - Print help message and exit.</li>
<li><code>mkdocs gh-deploy</code> - Deploy the documentation to GitHub pages and push it with the branch gh-pages.</li>
<li><code>mkdocs gh-deploy --help</code> - Print help of gh-deploy</li>
</ul>
<p>The easiest way to "deploy" the documentation is putting the required files in the <strong>/docs</strong> folder and configuring the <strong>mkdocs.yml</strong> file.
With the command <code>mkdocs gh-deploy</code> the documentation will be deployed and pushed to Github (uses the branch: gh-deploy). This can takes less than a minute. The website name you can find in the terminal output of this command or &#x3C; username >.github.io/&#x3C; repository >.</p>
<h3 id="github---workflows"><a aria-hidden="true" class="anchor-heading icon-link" href="#github---workflows"></a>github - workflows</h3>
<p>For even make it easier for the documentation, it's possible to do an <a href="https://docs.github.com/en/actions/learn-github-actions/understanding-github-actions?learn=getting_started">"action"</a> on github.
It is a <code>/.github/workflows/*.yml</code> file, which will be run after a specific event.
In this case we will run the command <code>mkdocs gh-deploy</code> after a push to the main or master branch.  </p>
<p>Create the folders and file <code>/.github/workflows/mkdocs.yml</code> and put the following content in the file (<strong>ci.yml</strong>):</p>
<pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">name</span><span class="token punctuation">:</span> ci<span class="token punctuation">-</span>mkdocs

<span class="token comment">#if pushed from master or main, this action will be triggered</span>
<span class="token key atrule">on</span><span class="token punctuation">:</span>
  <span class="token key atrule">push</span><span class="token punctuation">:</span>
    <span class="token key atrule">branches</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> master 
      <span class="token punctuation">-</span> main
<span class="token key atrule">permissions</span><span class="token punctuation">:</span>
  <span class="token key atrule">contents</span><span class="token punctuation">:</span> write

<span class="token comment">#jobs to be executed</span>
<span class="token key atrule">jobs</span><span class="token punctuation">:</span>
  <span class="token key atrule">deploy</span><span class="token punctuation">:</span>
    <span class="token key atrule">runs-on</span><span class="token punctuation">:</span> ubuntu<span class="token punctuation">-</span>latest
    <span class="token key atrule">steps</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/checkout@v4
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Configure Git Credentials
        <span class="token key atrule">run</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">
          git config user.name github-actions[bot]
          git config user.email 41898282+github-actions[bot]@users.noreply.github.com</span>
      <span class="token punctuation">-</span> <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/setup<span class="token punctuation">-</span>python@v5
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token key atrule">python-version</span><span class="token punctuation">:</span> 3.x
      <span class="token punctuation">-</span> <span class="token key atrule">run</span><span class="token punctuation">:</span> echo "cache_id=$(date <span class="token punctuation">-</span><span class="token punctuation">-</span>utc '+%V')" <span class="token punctuation">></span><span class="token punctuation">></span> $GITHUB_ENV 
      <span class="token punctuation">-</span> <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/cache@v4
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token key atrule">key</span><span class="token punctuation">:</span> mkdocs<span class="token punctuation">-</span>material<span class="token punctuation">-</span>$<span class="token punctuation">{</span><span class="token punctuation">{</span> env.cache_id <span class="token punctuation">}</span><span class="token punctuation">}</span>
          <span class="token key atrule">path</span><span class="token punctuation">:</span> .cache
          <span class="token key atrule">restore-keys</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">
            mkdocs-material-</span>
      <span class="token punctuation">-</span> <span class="token key atrule">run</span><span class="token punctuation">:</span> pip install mkdocs<span class="token punctuation">-</span>material
      <span class="token punctuation">-</span> <span class="token key atrule">run</span><span class="token punctuation">:</span> pip install pillow cairosvg
      <span class="token punctuation">-</span> <span class="token key atrule">run</span><span class="token punctuation">:</span> mkdocs gh<span class="token punctuation">-</span>deploy <span class="token punctuation">-</span><span class="token punctuation">-</span>force
</code></pre>
<p>The main part for this file comes from the following sourece: <a href="https://squidfunk.github.io/mkdocs-material/publishing-your-site/?h=github#with-github-actions">https://squidfunk.github.io/mkdocs-material/publishing-your-site/?h=github#with-github-actions</a>.  </p>
<p>Now, when you push your documentation with the main branch, it will be automaticaly deployed on github. You even don't have to run anymore <code>mkdocs gh-deploy</code>.</p>