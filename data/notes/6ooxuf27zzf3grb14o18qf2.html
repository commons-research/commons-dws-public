<h1 id="awk"><a aria-hidden="true" class="anchor-heading icon-link" href="#awk"></a>Awk</h1>
<h1 id="sirius-outputs-formatting"><a aria-hidden="true" class="anchor-heading icon-link" href="#sirius-outputs-formatting"></a>Sirius outputs formatting</h1>
<p>These commands require to have <a href="https://en.wikipedia.org/wiki/AWK#:~:text=AWK%20(awk)%20is%20a%20domain,data%20extraction%20and%20reporting%20tool.">awk</a> and <a href="https://csvkit.readthedocs.io/en/latest/scripts/csvcut.html">csvcut</a> installed on your system.</p>
<p>The code processes a file named canopus_compound_summary.tsv. It searches for a field called "id" in the file's header. If found, it splits the values in that field by underscores and adds a new column called "feature_id". It then modifies the header by appending "_canopus" to each field name and prints the modified header. After that, it extracts specific columns and saves the extracted data. Finally, the extracted data is formatted as tab-delimited and saved in a file called canopus_compound_summary_id.tsv.</p>
<p><code>awk 'BEGIN{FS="\t"; OFS="\t"} NR==1{for(i=1;i&#x3C;=NF;i++){if($i=="id"){split_field_index=i;break}} if(split_field_index==0){print"Field not found: field_name_to_split">"/dev/stderr";exit 1}print $0,"feature_id";next}{split($split_field_index,arr,"_");print $0,arr[length(arr)]}' canopus_compound_summary.tsv | awk 'BEGIN {FS=OFS="\t"} NR==1 {for (i=1; i&#x3C;=NF; i++) $i = $i "_canopus"} {print}' | csvcut -t -c "feature_id_canopus,id_canopus,molecularFormula_canopus,adduct_canopus,NPC#pathway_canopus,NPC#superclass_canopus,NPC#class_canopus" | csvformat -T > canopus_compound_summary_id.tsv</code></p>
<p>The code processes a file named compound_identifications.tsv. It searches for a field called "id" in the file's header. If found, it splits the values in that field by underscores and adds a new column called "feature_id". It then modifies the header by appending "_sirius" to each field name and prints the modified header. After that, it extracts specific columns and saves the extracted data. Finally, the extracted data is formatted as tab-delimited and saved in a file called compound_identifications_id.tsv.</p>
<p><code>awk 'BEGIN{FS="\t"; OFS="\t"} NR==1{for(i=1;i&#x3C;=NF;i++){if($i=="id"){split_field_index=i;break}} if(split_field_index==0){print"Field not found: field_name_to_split">"/dev/stderr";exit 1}print $0,"feature_id";next}{split($split_field_index,arr,"_");print $0,arr[length(arr)]}' compound_identifications.tsv | awk 'BEGIN {FS=OFS="\t"} NR==1 {for (i=1; i&#x3C;=NF; i++) $i = $i "_sirius"} {print}' | csvcut -t -c "feature_id_sirius,id_sirius,molecularFormula_sirius,adduct_sirius,InChIkey2D_sirius,InChI_sirius,name_sirius,smiles_sirius,xlogp_sirius,ionMass_sirius" | csvformat -T > compound_identifications_id.tsv</code></p>
<p>Same with score</p>
<p><code>awk 'BEGIN{FS="\t"; OFS="\t"} NR==1{for(i=1;i&#x3C;=NF;i++){if($i=="id"){split_field_index=i;break}} if(split_field_index==0){print"Field not found: field_name_to_split">"/dev/stderr";exit 1}print $0,"feature_id";next}{split($split_field_index,arr,"_");print $0,arr[length(arr)]}' compound_identifications.tsv | awk 'BEGIN {FS=OFS="\t"} NR==1 {for (i=1; i&#x3C;=NF; i++) $i = $i "_sirius"} {print}' | csvcut -t -c "feature_id_sirius,id_sirius,ConfidenceScore_sirius,CSI:FingerIDScore_sirius,ZodiacScore_sirius,SiriusScore_sirius,molecularFormula_sirius,adduct_sirius,InChIkey2D_sirius,InChI_sirius,name_sirius,smiles_sirius,xlogp_sirius,ionMass_sirius" | csvformat -T > compound_identifications_id.tsv</code></p>
<p>To add suffix/prefix</p>
<p>This will suffix
<code>awk -F'\t' 'BEGIN {OFS="\t"} NR==1 {for (i=1; i&#x3C;=NF; i++) $i = $i "_suffix"} {print}' input.tsv > output.tsv</code></p>
<p>This will prefix
<code>awk -F'\t' 'BEGIN {OFS="\t"} NR==1 {for (i=1; i&#x3C;=NF; i++) $i = "prefix_" $i} {print}' input.tsv > output.tsv</code></p>
<p>CSV to TSV conversion </p>
<p>awk -v OFS='\t' '{ $1=$1; print }' input.csv > output.tsv</p>
<hr>
<strong>Backlinks</strong>
<ul>
<li><a href="/commons-dws-public/notes/4vx4v8ksgg60hqz1ypazshj">2024-03-04</a></li>
</ul>