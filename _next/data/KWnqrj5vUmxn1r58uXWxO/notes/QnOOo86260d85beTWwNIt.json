{"pageProps":{"note":{"id":"QnOOo86260d85beTWwNIt","title":"Sed_bash","desc":"","updated":1682950627290,"created":1609604978319,"custom":{},"fname":"tools.cli.sed_bash","type":"note","vault":{"fsPath":"vault"},"contentHash":"778caabdd8daaf418e249dc05f05430a","links":[{"type":"wiki","from":{"fname":"tools.cli.sed_bash","id":"QnOOo86260d85beTWwNIt","vaultName":"vault"},"value":"tag.oneday","alias":"#oneday","position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":23,"offset":23},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"tag.oneday"}},{"from":{"id":"1zIrSWjXkUv4Lx4VeWLgj","fname":"tools.dendron.biblio","vaultName":"vault"},"type":"backlink","position":{"start":{"line":26,"column":5,"offset":1120},"end":{"line":26,"column":27,"offset":1142},"indent":[]},"value":"tools.cli.sed_bash"},{"from":{"id":"1zIrSWjXkUv4Lx4VeWLgj","fname":"tools.dendron.biblio","vaultName":"vault"},"type":"backlink","position":{"start":{"line":30,"column":8,"offset":1201},"end":{"line":30,"column":30,"offset":1223},"indent":[]},"value":"tools.cli.sed_bash"}],"anchors":{"quick-replace-in-text-file":{"type":"header","text":"quick replace in text file","value":"quick-replace-in-text-file","line":66,"column":0,"depth":2}},"children":[],"parent":"ojp1d7q901deylia5nzmnv9","data":{}},"body":"<h1 id=\"sed_bash\"><a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#sed_bash\"></a>Sed_bash</h1>\n<p><a title=\"Private\" href=\"https://wiki.dendron.so/notes/hfyvYGJZQiUwQaaxQO27q.html\" target=\"_blank\" class=\"private\">#oneday (Private)</a>\nautomate with a sed script ? the bib cleaning </p>\n<p>Some sed black magic </p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"\\{\"</span> <span class=\"token operator\">|</span> <span class=\"token function\">sed</span> <span class=\"token string\">\"s|<span class=\"token entity\" title=\"\\\\\">\\\\</span>\\{|<span class=\"token entity\" title=\"\\\\\">\\\\</span>\\'{|\"</span>\n</code></pre>\n<p>Double \\ to escape the \\</p>\n<p>And repeat </p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"\\{jhdgjshgjhfsjdhgf\\}\"</span> <span class=\"token operator\">|</span> <span class=\"token function\">sed</span> <span class=\"token string\">\"s|<span class=\"token entity\" title=\"\\\\\">\\\\</span>\\{|<span class=\"token entity\" title=\"\\\\\">\\\\</span>\\'{|g; s|<span class=\"token entity\" title=\"\\\\\">\\\\</span>\\}|<span class=\"token entity\" title=\"\\\\\">\\\\</span>\\'}|g;\"</span>\n</code></pre>\n<p>Now add input and outputs </p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sed</span> <span class=\"token string\">\"s|<span class=\"token entity\" title=\"\\\\\">\\\\</span>\\{|<span class=\"token entity\" title=\"\\\\\">\\\\</span>\\'{|g; s|<span class=\"token entity\" title=\"\\\\\">\\\\</span>\\}|<span class=\"token entity\" title=\"\\\\\">\\\\</span>\\'}|g\"</span> library.bib <span class=\"token operator\">></span> library_formatted.bib\n</code></pre>\n<p>We'll try to automatize the process using <a href=\"https://stackoverflow.com/a/13807906\">https://stackoverflow.com/a/13807906</a> fswatch and alternative to inotifywatch on linux <a href=\"https://linux.die.net/man/1/inotifywatch\">https://linux.die.net/man/1/inotifywatch</a></p>\n<p>So here is the small bash script. It will take the command line arg 1 and add the _formatted prefix to it. Could be cleaner and directly extract the filename to accomodate for various type of extension. Not the point here. If any body has an idea, please contribute ! :point_down: </p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token shebang important\">#!/bin/bash</span>\n<span class=\"token function\">sed</span> <span class=\"token string\">\"s|<span class=\"token entity\" title=\"\\\\\">\\\\</span>\\{|<span class=\"token entity\" title=\"\\\\\">\\\\</span>\\'{|g; s|<span class=\"token entity\" title=\"\\\\\">\\\\</span>\\}|<span class=\"token entity\" title=\"\\\\\">\\\\</span>\\'}|g\"</span> <span class=\"token string\">\"<span class=\"token variable\">$1</span>\"</span> <span class=\"token operator\">></span> <span class=\"token string\">\"<span class=\"token variable\">${1<span class=\"token operator\">%</span>.bib}</span>_formatted.bib\"</span>\n</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token shebang important\">#!/bin/bash</span>\n\n<span class=\"token comment\"># fullfilename=\"$(basename $1)\"</span>\n<span class=\"token comment\"># extension=\"${fullfilename##*.}\"</span>\n<span class=\"token comment\"># filename=\"${fullfilename%.*}\"</span>\n\n<span class=\"token comment\"># echo $fullfilename</span>\n<span class=\"token comment\"># echo $extension</span>\n<span class=\"token comment\"># echo $filename</span>\n\n<span class=\"token comment\">#echo \"File added: \" \"$(basename $1)\" \"$(basename $1)\"</span>\n<span class=\"token function\">sed</span> <span class=\"token string\">\"s|<span class=\"token entity\" title=\"\\\\\">\\\\</span>\\{|<span class=\"token entity\" title=\"\\\\\">\\\\</span>\\'{|g; s|<span class=\"token entity\" title=\"\\\\\">\\\\</span>\\}|<span class=\"token entity\" title=\"\\\\\">\\\\</span>\\'}|g\"</span> <span class=\"token string\">\"<span class=\"token variable\">$1</span>\"</span> <span class=\"token operator\">></span> <span class=\"token string\">\"./formatted_bib/<span class=\"token variable\">${filename}</span>_formatted.bib\"</span>\n\n</code></pre>\n<p>fswatch has been somehow a nightmare to understand ...</p>\n<p>to trouble shoot use the follwoing line to be sure of what exactly you take as input </p>\n<pre class=\"language-bash\"><code class=\"language-bash\">fswatch -0 ./mendeley_output/ <span class=\"token operator\">|</span> <span class=\"token function\">xargs</span> -0 -n1 -I<span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span> <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"{}\"</span>\n</code></pre>\n<h2 id=\"quick-replace-in-text-file\"><a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#quick-replace-in-text-file\"></a>quick replace in text file</h2>\n<p><code>sed -i 's/original/new/g' file.txt</code></p>\n<p>sed -i'' 's/CHARGE=1-/CHARGE=-1/g' /Users/pma/01_large_files/mgf/isdb_neg.mgf</p>\n<hr>\n<strong>Backlinks</strong>\n<ul>\n<li><a href=\"/commons-dws-public/notes/1zIrSWjXkUv4Lx4VeWLgj\">Biblio</a></li>\n</ul>","noteIndex":{"id":"QvYK9hGbCvPpEfSRYhV8j","title":"Welcome to the COMMONS Lab Open Dendron","desc":"","updated":1693056226815,"created":1630130450048,"custom":{"nav_order":0,"permalink":"/"},"fname":"root","type":"note","vault":{"fsPath":"vault"},"contentHash":"20f67df3dd870fc450a162c202c9ff41","links":[{"type":"wiki","from":{"fname":"root","id":"QvYK9hGbCvPpEfSRYhV8j","vaultName":"vault"},"value":"open-notebook.commons.setup","position":{"start":{"line":43,"column":118,"offset":1871},"end":{"line":43,"column":149,"offset":1902},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"open-notebook.commons.setup"}}],"anchors":{"what-is-this-note":{"type":"header","text":"What is this note","value":"what-is-this-note","line":16,"column":0,"depth":2},"tutorial":{"type":"header","text":"Tutorial","value":"tutorial","line":20,"column":0,"depth":2},"dendron":{"type":"header","text":"Dendron.","value":"dendron","line":22,"column":0,"depth":3},"what-is-dendron-":{"type":"header","text":"What is Dendron ?","value":"what-is-dendron-","line":24,"column":0,"depth":4},"where-to-get-more-info-on-dendron-":{"type":"header","text":"Where to get more info on Dendron ?","value":"where-to-get-more-info-on-dendron-","line":30,"column":0,"depth":4},"concrete-steps-to-access-and-contribute-to-the-dbgi-dendron":{"type":"header","text":"Concrete steps to access and contribute to the DBGI Dendron","value":"concrete-steps-to-access-and-contribute-to-the-dbgi-dendron","line":35,"column":0,"depth":4},"questions-comments-suggestions-":{"type":"header","text":"Questions, comments, suggestions ?","value":"questions-comments-suggestions-","line":52,"column":0,"depth":2}},"children":["5o0tvzf4l6t6moau7en1v48","e4ul30admmxm9ilxfq275cq","h78qbvh1fd9bwcykmcm9uo3","6ooxuf27zzf3grb14o18qf2","tiqo5upbg6224t7i8p87iok","ltq8wcrabmq6mlescrdi4m0","bdq3suiz8yriznljea2zpug","ih6vyup3yre4m9woc9ldl7k","vDTgZL9UHWqYtBFdtD3vK","69ekb2qhuwukr0jwrzy6tnw","373694o1o6ocqohko4um7c9","jldFUSJGjDf1mFH8c2yUI","dh2qp7w4tl6otf89xrmxitv","2rvdf4t5qnx5hqjj29bojcc","stj9lq0lxhfuk5ntomiozz0","gvdyfgvq0z08fcfaqzmhtjo","2rvclk21kfedpvxuzjpizi7","dcwgamgyghrlyau1avlh6ug","432qdutuo1i8h5pcuh39ytt","2npxodkvs5jk6p1eksi551b","h81rw16zzgh9kix8ti1mbam","lco50o42dfeph5i5f2k981w","46d1odkovrpdi6g16992phy","s9gzk7nphtjzmpdqvk5y4vj","82ra6p4ykf814hp8yfw4wp6","hpnaglyhnb48vuiniqecnqf","y7nk7xmiht44neo0q7cl5cs","2cxr093kvrg4jojokwgqrbj","8vfu5h3617jbzy78xr2hlo1","w75krbmkkvla3hwd66hn5bh","40po5od17ekcr1e77dluxao","4pqppog2u66rx1tkc8jy5v9","ektni5nfulyro7dkrbtek7j","vfsp2aci6vy7kg2jsyy8tzu","0wm4geq40t6nscn88rcwu47","ib4jmxy1x3l1r0ewe6hln4j","0h57aw0be2jnc3dxcpn3ajn","4789z8f1dqdh5k3nmgr1m4z","p5dszyuhj1klgje0brtv0xj","sk4m9gq7vz2t9phcxlxvqpw","43p60vv8btyhaclugl93jok","zhc9hhpaobkbo4e2votv6wr","ylulfzi7ra5yv6ja7j78t6e","wj0i9czxvt4v0b674nb8501","ovslc641d0h00s16tf6kl8w","4zmlbmcp6q4q69ycvhavzr6","59ftsVxFXXM9bB43vfKwK","nmnpsy2e1rwqnqgurogi2u6","6b5uf8hv44mbgircddcb46i","s9j6c26u6qgl5dvnqv8opam","je0ksq927btmorptaje6a4p","xm4a1smh9gcahxda5bssxfi","3cgqlppr4es3iuoa2o3mhn8","d6edcr5j5kjgdt791uujpn0","zfu2gniwqhgo1j44r3yfx7y","gap1pjhvt94m5izg0zlef0w","o3y0vguickctv1yx4z42qev","g78c0e4ts7wgkof1ykkgzbl","hsqldiv7revakz0fqay51eu","99wwtyhexdqu5bxrtgn9whw","m8e37qw6n4i3cfv9ohq7e82","ds1s2fjqhwvw1zqst8l4z4f","ec4pkybo5iwljo3zdr9894x","cbikmu2vjnxulf5tf9xfist","1icb0ka0yjwpoerg4zym9la"],"parent":null,"data":{},"body":"\n![](/assets/images/allard-lab.jpg)\n\nWelcome the the COMMONS Lab Open Dendron !\n\nIn the [COMMONS Lab](https://www.unifr.ch/bio/en/groups/allard/) we intent to follow the [Open Notebook Science](https://en.wikipedia.org/wiki/Open-notebook_science) approach to document our research.\n\nFor this we use the [Dendron](https://www.dendron.so/) system as a mean to efficiently capture notes and publish them.\n\n## What is this note\n\nThis note is a succinct tutorial note aiming to get you started in the use of the COMMONS Lab Dendron.\n\n## Tutorial\n\n### Dendron. \n\n#### What is Dendron ?\n\n> Dendron is an open-source, local-first, markdown-based, note-taking tool. Think of it as a cache for everything that you care about - if you've spent more then five minutes solving a problem, you should never spent any more time solving the same exact problem.\n> \n> Dendron is a knowledge base built by and for developers and integrates natively with IDEs like VS Code and VSCodium.\n\n#### Where to get more info on Dendron ?\n\n- You can get more information in the Dendron system at the official website www.dendron.so\n- All the Dendron documentation is hosted here https://wiki.dendron.so/. It is, obviously, a Dendron itself.\n\n#### Concrete steps to access and contribute to the DBGI Dendron\n\n1. Install [VSCode](https://code.visualstudio.com/download)\n2. Install [Dendron](https://marketplace.visualstudio.com/items?itemName=dendron.dendron) from the VSCode marketplace \n3. Clone the COMMONS Dendron repo\n\n    In your terminal\n    ```\n    git clone https://github.com/commons-research/commons-dws-public.git\n    ```\n4. In VSCode open (File/Open) the cloned repository.\n5. Voila ! You should now be in the COMMONS Lab Open Dendron.\n\nFeel free to explore and contribute.\nA first, important step could be to configure VSCode so that you can easily add a daily note. See steps described at [[open-notebook.commons.setup]]\n\n\n## Questions, comments, suggestions ?\n\nFeel free to contribute here https://github.com/orgs/commons-research/discussions\n\n"},"collectionChildren":null,"customHeadContent":null,"config":{"version":5,"dev":{"enablePreviewV2":true},"commands":{"lookup":{"note":{"selectionMode":"extract","confirmVaultOnCreate":false,"leaveTrace":false,"bubbleUpCreateNew":true,"vaultSelectionModeOnCreate":"smart","fuzzThreshold":0.2}},"insertNote":{"initialValue":"templates"},"insertNoteLink":{"aliasMode":"none","enableMultiSelect":false},"insertNoteIndex":{"enableMarker":false},"randomNote":{},"copyNoteLink":{"aliasMode":"title"},"templateHierarchy":"template"},"workspace":{"vaults":[{"fsPath":"vault"}],"journal":{"dailyDomain":"daily","name":"journal","dateFormat":"y.MM.dd","addBehavior":"childOfDomain"},"scratch":{"name":"scratch","dateFormat":"y.MM.dd.HHmmss","addBehavior":"asOwnDomain"},"graph":{"zoomSpeed":1,"createStub":false},"enableAutoCreateOnDefinition":false,"enableXVaultWikiLink":false,"enableRemoteVaultInit":true,"workspaceVaultSyncMode":"noCommit","enableAutoFoldFrontmatter":false,"maxPreviewsCached":10,"maxNoteLength":204800,"task":{"name":"","dateFormat":"","addBehavior":"childOfCurrent","statusSymbols":{"":" ","wip":"w","done":"x","assigned":"a","moved":"m","blocked":"b","delegated":"l","dropped":"d","pending":"y"},"prioritySymbols":{"H":"high","M":"medium","L":"low"},"todoIntegration":false,"createTaskSelectionType":"selection2link","taskCompleteStatus":["done","x"]},"enableUserTags":true,"enableHashTags":true,"dendronVersion":"0.112.0","enableEditorDecorations":true,"enableFullHierarchyNoteTitle":false},"preview":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enableMermaid":true,"enablePrettyRefs":true,"enableKatex":true,"automaticallyShowPreview":false,"enableFrontmatterTags":true,"enableHashesForFMTags":false},"publishing":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enableMermaid":true,"enablePrettyRefs":true,"enableKatex":true,"assetsPrefix":"/commons-dws-public","copyAssets":true,"siteHierarchies":["root"],"enableSiteLastModified":true,"siteRootDir":"docs","siteUrl":"https://commons-research.github.io","enableFrontmatterTags":true,"enableHashesForFMTags":false,"enableRandomlyColoredTags":true,"duplicateNoteBehavior":{"action":"useVault","payload":["vault"]},"writeStubs":false,"seo":{"title":"COMMONS DWS Public","description":"Personal knowledge space"},"github":{"enableEditLink":true,"editLinkText":"Click here to edit this page on Github !","editBranch":"main","editViewMode":"edit","editRepository":"https://github.com/commons-research/commons-dws-public"},"enablePrettyLinks":true,"enableTaskNotes":true,"siteFaviconPath":"favicon.ico","siteIndex":"root","searchMode":"lookup"}}},"__N_SSG":true}